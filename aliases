USAGE=$'Usage:
  . aliases define'

if [ $# -ne 1 ]; then
    echo "$USAGE" >&2
else
    case "$1" in
    define)
        alias accio=". accio"
        alias adu="sudo apt-get update && sudo apt-get dist-upgrade"
        alias chmox="chmod +x"
        alias doch='sudo $(fc -ln -1)'
        if alias g > /dev/null; then
            unalias g
        fi
        function g { # from https://github.com/pengwynn/dotfiles/blob/master/git/git.zsh
            if [ "$#" -gt 0 ]; then
                git "$@"
            else
                #echo "Last commit: $(time_since_last_commit) ago"
                git status --short --branch
            fi
        }
        alias http="python3 -m SimpleHTTPServer"
        alias l="ls -BFahl"
        alias ll='ls -BFahl "$@" | less'
        alias mkcd="take"
        if ! (which pip3 &> /dev/null); then
            if which pip-3.4 &> /dev/null; then
                alias pip3="pip-3.4"
            elif which pip-3.3 &> /dev/null; then
                alias pip3="pip-3.3"
            elif which pip-3.2 &> /dev/null; then
                alias pip3="pip-3.2"
            fi
        fi
        alias pip3i="pip3 install --target /opt/py"
        alias png2gif="convert -delay 10 -loop 0 *.png animaion.gif"
        alias py="python3 -q"
        alias relog=": $@; zsh; logout"
        alias retab="tab; logout"
        function rm { # remove current directory when called without arguments
            if [ "$#" -gt 0 ]; then
                command rm "$@"
            else
                command rm -r .
            fi
        }
        function rr {
            if [ "$#" -gt 0 ]; then
                command rm -rf "$@"
            else
                command rm -rf .
            fi
        }
        alias rt="t retweet"
        alias ssync="rsync --rsh=ssh"
        alias sudo="sudo -p '[sudo] Password for %p:' "
        alias syncbin-version="cat ${HUB:-/opt/hub}/fenhl/syncbin/version.txt"
        if ! (which tac &> /dev/null); then
            alias tac="tail -r"
        fi
        if ! (which tweet &> /dev/null); then
            alias tweet="t update"
        fi
        alias view="less" # view is less for now, working on a script that uses cat if the file is shorter than the terminal height
        if [ -x ~/bin/aliases ]; then
            . ~/bin/aliases define
        fi
        ;;
    define-suffix)
        alias -s json=jpy
        alias -s log=ssel
        alias -s txt=less
        ;;
    *)
        echo "$USAGE" >&2
        ;;
    esac
fi
